<!-- CS286-Geomapping and Location
     Eddie and Liam
     home.html -->

<html>
<head>
  <!-- CSS stylesheets -->
    <!-- For general styling -->
  <link rel="stylesheet" type="text/css" href="style.css">
    <!-- For the fonts -->
  <link href='https://fonts.googleapis.com/css?family=Alfa Slab One' rel='stylesheet'>
  <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
    <!-- For the slide-out menu -->
  <link rel="stylesheet" href="sidebar_styling.css">

  <title>Ride Along</title>
  <meta name="viewport" content="initial-scale=1.0">
  <meta charset="utf-8">
</head>

<script>
  // These variables are used to search at the end! 
  var startLocation;
  var endLocation;
  var dateTime;

  // If flag is set to true, search for ride function will be unavailable
  var flag = true;

  function w3_open() {
    document.getElementById("mySidebar").style.display = "block";
  }

  function w3_close() {
    document.getElementById("mySidebar").style.display = "none";
  } 

  function open_start() {
    var prompt1 = window.prompt("Enter your starting location here:", "");
    if (prompt1 == null || prompt1 == "") {
      prompt1 = "No location was entered";
      startLocation = prompt1;
      flag = true;
    } else {
      startLocation = prompt1;
      flag = false;
    }
    document.getElementById("start").innerHTML = startLocation;
  }

  function open_end() {
    var prompt2 = window.prompt("Enter your end location here:", "");
    if (prompt2 == null || prompt2 == "") {
      prompt2 = "No location was entered";
      endLocation = prompt2;
      flag = true;
    } else {
      endLocation = prompt2;
      flag = false;
    }
    document.getElementById("end").innerHTML = endLocation;
  }

  function open_date() {
    var prompt3 = window.prompt("Enter your date and time in this format e.g 'December 17, 2019 03:24:00'", "");
    if (prompt3 == null || prompt3 == "") {
      prompt3 == "No date or time was entered";
      dateTime = prompt3;
      flag = true;
    } else {
      dateTime = prompt3;
      flag = false;
    } 
    var text = 'Your selected date & time is: ' + dateTime;
    document.getElementById("chosenDate").innerHTML = text;
  }

function locateAddress(input) {
geocoder = new google.maps.Geocoder();

geocoder.geocode({ 'address': input }

  , function(results, status) {

    if (status == google.maps.GeocoderStatus.OK) {
      var msg = '<b>Found ' + results.length + ' addresses</b><br/>';

      if (results.length > 1) {
        msg += '<ol>';
        for (i = 0; i < results.length; i++) {
          msg += '<li><a href="javascript:goto' 
                  + results[i].geometry.location.toString() 
                  + '">' + results[i].formatted_address + '</a>'
                  + '</li>'

        }
        msg += '</ol>';

        //lkd, sigh
        // msg += '<div style="text-align:right; width:95%"><a href="javascript:hideMain()"><b>Close this dialog</b></a></div>';
        msg += '<a class=aCloser href="javascript:hideMain()">Close this dialog</a>';

        // Display the floating window's contents
        document.getElementById("main").innerHTML = msg;

        // Make the floating window visible
        document.getElementById("window").style.visibility = 'visible';

        // Set the height of the floating window so that it displays all addresses
        // The following statement uses jQuery to retrieve the height of certain 
        // elements on the page, since we have included the necessary jQuery 
        // scripts to make the data window draggable.
          /* argh height:92px;  world work fine EXCEPT author overwrites in his styling for both #main & #top. Sheesh!!! */
          // how if found out! 
          // document.getElementById("main").innerHTML += "<br>"+ $("#main").outerHeight() + ", "+ $("#top").outerHeight();
        document.getElementById("window").style.height = $("#main").outerHeight() + $("#top").outerHeight() + 11;

      } else {
        map.setCenter(results[0].geometry.location);
        map.setZoom(15);
      }

    }// end status OK

  }); // end geocoder.geocode function

}// end locateAddress 
</script>

<body>
  <!-- Sidebar -->
  <div class="w3-sidebar w3-bar-block w3-border-right" style="display:none; width: 700px" id="mySidebar">
    <button onclick="w3_close()" class="w3-bar-item w3-large">Close &times;</button>
    <div id="ride">
        <h1 class="title1" style="font-family: 'Poppins', sans-serif; margin-top: 100px">Looking for a ride? Let's go!</h1>
          <button onclick="open_start()">Leaving from</button>
          <p id="start" style="font-style: italic"></p>
          <button onclick="open_end()">Going to</button>
          <p id="end" style="font-style: italic"></p>
          <hr>
          <button id="date" style="margin-top: 30px; font-style: italic" onclick="open_date()">Select your Date and Time</button>
          <p id="chosenDate"></p>
          <hr>
          <button class="button search">Click here to search for your ride</button>
    </div> 
  </div>

  <div class="topnav">
      <button class="w3-button w3-dark-grey w3-xlarge" onclick="w3_open()">â˜°</button>
    <div class="centerItems">
      <h5 style="font-size: 20px; font-family: 'Alfa Slab One'">RideAlong</h5>
    </div>
    <div class="rightItems">
      <a href="driver.html">Driver</a>
      <a class="active" href="passenger.html">Passenger</a>
    </div>
  </div>
  <div id="map1"></div>

  <!-- Div for map -->
  <script>
  // Function to create map
  function initMap() {
        var latlng = new google.maps.LatLng(35.2031, -85.9211);
        var settings = {
          zoom: 17,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
                 
    var map1 = new google.maps.Map(document.getElementById("map1"), settings);
  }
  </script>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGPJCC0UuL1quW1tz93wX_bvON2Z7EmAA&callback=initMap"
    async defer></script>

</body>
</html>

        
